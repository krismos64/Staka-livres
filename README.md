# üìö Staka Livres - Plateforme de Correction de Manuscrits

## üéØ Pr√©sentation du Projet

**Staka Livres** est une plateforme web moderne d√©di√©e aux **services de correction et d'√©dition de manuscrits**. L'application offre une exp√©rience compl√®te aux auteurs, de la d√©couverte des services jusqu'√† la gestion avanc√©e de leurs projets √©ditoriaux, avec un syst√®me d'authentification s√©curis√©, un espace d'administration complet et un **syst√®me de facturation automatique avec React Query**.

### üåü **Vision**

D√©mocratiser l'acc√®s aux services √©ditoriaux professionnels en offrant une plateforme intuitive, transparente et efficace pour tous les auteurs, qu'ils soient d√©butants ou confirm√©s.

### üé® **Interface Moderne**

- **Landing Page production-ready** : 14 composants React (2400+ lignes) avec hook usePricing
- **Syst√®me d'authentification** s√©curis√© avec JWT
- **Page d'inscription** avec validation compl√®te
- **Dashboard client** avec gestion compl√®te des projets
- **Syst√®me de facturation** intelligent avec React Query et cache optimis√©
- **Espace administrateur** moderne et intuitif avec mode d√©mo professionnel
- **Design responsive** mobile-first avec animations fluides
- **UX premium** avec micro-interactions et feedback temps r√©el

### üé® **Landing Page Production-Ready (14 Composants)**

- **Architecture compl√®te** : 14 composants React sp√©cialis√©s (2400+ lignes total)
- **PricingCalculator** : Hook usePricing avec tarification d√©gressive intelligente
- **Composants majeurs** : Hero, Navigation sticky, Services, Packs, FAQ accord√©on, Contact
- **Features avanc√©es** : Widget WhatsApp flottant, formulaires valid√©s, animations fluides
- **Mobile-first** : Design responsive avec micro-interactions optimis√©es
- **SEO optimis√©** : Structure s√©mantique HTML5 production-ready
- **Hook personnalis√©** : `usePricing.ts` avec logique m√©tier tarification
- **Navigation intelligente** : D√©tection scroll, menu mobile, sticky CTA bar

---

## üìö **Documentation Technique Compl√®te**

Le projet dispose d'une documentation exhaustive dans le dossier `docs/` couvrant tous les aspects techniques et fonctionnels :

### üèóÔ∏è **Architecture et D√©veloppement**

- **[Guide Backend API](docs/README-backend.md)** : Documentation compl√®te de l'API REST avec exemples et architecture technique
- **[Guide Components](docs/README-components.md)** : Documentation des composants React avec patterns et bonnes pratiques
- **[Guide Pages](docs/README-pages.md)** : Architecture des pages avec d√©tails d'impl√©mentation et flows utilisateur
- **[Guide Landing Page](docs/README-landingpage.md)** : Documentation des 14 composants marketing et hooks sp√©cialis√©s
- **[Guide Styles](docs/README-style.md)** : Syst√®me de design, Tailwind CSS et guidelines visuelles

### üóÑÔ∏è **Base de Donn√©es et Int√©grations**

- **[Guide Base de Donn√©es](docs/Base-de-donnees-guide.md)** : Documentation exhaustive des 11 mod√®les Prisma, relations, optimisations et troubleshooting
- **[Guide Messagerie API](docs/MESSAGES_API_GUIDE.md)** : Architecture React Query, hooks sp√©cialis√©s et performance
- **[Guide React Query](docs/README-REACT-QUERY.md)** : Int√©gration cache intelligent, patterns et optimisations

### üë®‚Äçüíº **Administration et Production**

- **[Guide Admin Complet](docs/ADMIN_COMPLETE_GUIDE.md)** : Vue d'ensemble espace admin, s√©curit√© et mode d√©mo
- **[Guide Admin Users Production](docs/INTEGRATION_ADMIN_USERS_COMPLETE.md)** : Module CRUD complet avec backend op√©rationnel et tests Docker
- **[Guide Facturation Stripe](docs/BILLING_README.md)** : Int√©gration paiements, webhooks et gestion des factures
- **[Guide Syst√®me de Factures](docs/INVOICE_SYSTEM.md)** : Architecture facturation automatique et PDF
- **[Guide Webhooks](docs/WEBHOOK_IMPLEMENTATION.md)** : Impl√©mentation Stripe et gestion des √©v√©nements

### üîß **Guides Techniques Sp√©cialis√©s**

- **[Solutions Erreurs](docs/SOLUTION-ERREUR-504.md)** : R√©solution des probl√®mes courants et optimisations
- **[Demo Espace Admin](docs/Demo-espace-admin.md)** : Guide d'utilisation du mode d√©monstration

### üìä **M√©triques et Validation**

- Tests Docker valid√©s avec r√©sultats de production
- Architecture backend compl√®te avec 35+ endpoints
- Syst√®me de messagerie React Query (1000+ lignes de hooks optimis√©s)
- Module Admin Users production-ready avec suppression RGPD

---

## üîê Fonctionnalit√©s D√©velopp√©es

### üöÄ **Syst√®me d'Authentification Complet**

- **Inscription s√©curis√©e** avec validation des donn√©es
- **Connexion JWT** avec tokens de 7 jours
- **Hachage bcrypt** des mots de passe (12 rounds)
- **Gestion des r√¥les** : USER et ADMIN
- **Middleware d'authentification** pour routes prot√©g√©es
- **Gestion des sessions** avec localStorage
- **Redirection intelligente** selon le r√¥le utilisateur

### üí≥ **Syst√®me de Facturation Automatique (React Query)**

- **API compl√®te** : `fetchInvoices()`, `fetchInvoice()`, `downloadInvoice()` avec auth
- **Hooks React Query** : `useInvoices()`, `useInvoice()`, `useInvalidateInvoices()`
- **Cache intelligent** : 5-10 minutes avec invalidation automatique
- **√âtats optimis√©s** : `isLoading`, `isFetching`, `error` g√©r√©s automatiquement
- **Pagination fluide** : `keepPreviousData` pour √©viter les blancs UI
- **T√©l√©chargement PDF** : Blob API avec trigger automatique
- **Gestion d'erreurs** : Retry automatique et toasts informatifs
- **Performance** : Navigation instantan√©e gr√¢ce au cache

### üë®‚Äçüíº **Espace Administrateur Complet (9 Pages)**

- **AdminDashboard** : Vue d'ensemble avec KPIs et statistiques temps r√©el
- **AdminUtilisateurs** : **‚úÖ REFACTORIS√â COMPLET** - Architecture modulaire avec hooks personnalis√©s et composants r√©utilisables
  - **useAdminUsers** : Hook centralis√© pour logique API et gestion d'√©tats
  - **useDebouncedSearch** : Hook de recherche optimis√©e avec debounce
  - **UserTable** : Composant table g√©n√©rique avec accessibilit√© WCAG compl√®te
  - **SearchAndFilters** : Composants de recherche et filtres avec √©tats visuels
  - **ConfirmationModals** : Modales RGPD avec cons√©quences d√©taill√©es
- **AdminCommandes** : **‚úÖ REFACTORIS√â COMPLET** - Suivi projets avec changement de statuts et modale de d√©tails moderne
  - **CommandeDetailed** : Type √©tendu avec toutes les donn√©es (montant, priorit√©, fichiers, statistiques)
  - **Modale moderne XL** : Design gradient avec sections visuellement distinctes et actions rapides
  - **Backend enrichi** : Service `getCommandeById()` avec toutes les relations Prisma
- **AdminFactures** : Interface facturation avec t√©l√©chargement PDF et actions
- **AdminMessagerie** : Interface messagerie avanc√©e avec hooks React Query sp√©cialis√©s
- **AdminFAQ** : Gestion base de connaissance avec r√©organisation
- **AdminTarifs** : Configuration prix et services avec calculs automatiques
- **AdminPages** : CMS pour pages statiques avec preview et SEO
- **AdminStatistiques** : Analytics avanc√©es avec graphiques mock√©s
- **AdminLogs** : Timeline d'audit avec filtres et m√©tadonn√©es
- **Design moderne** : Sidebar sombre, animations fluides, responsive
- **Module Admin Users** : Architecture backend compl√®te (AdminUserService, AdminUserController)
- **Tests valid√©s** : Tests Docker complets avec r√©sultats de production
- **Mock data r√©alistes** : Donn√©es compl√®tes pr√™tes pour API
- **Architecture API-ready** : Services facilement rempla√ßables
- **Composants r√©utilisables** : G√©n√©riques pour extension √† d'autres projets Staka

üìñ **Documentation technique compl√®te** : [Guide Admin Users Production](docs/INTEGRATION_ADMIN_USERS_COMPLETE.md)

### üé≠ **Mode D√©monstration Admin Complet**

- **DemoModeProvider** : Context React avec gestion session timer (453 lignes)
- **MockDataService** : Service donn√©es fictives avec API compl√®te et pagination
- **Banni√®re interactive** : Timer temps r√©el, actions Rafra√Æchir/Reset/Prolonger/Quitter
- **Configuration URL** : `?demo=true&duration=60&readonly=true` avec d√©tection automatique
- **API adaptative** : Basculement intelligent entre donn√©es r√©elles et fictives
- **Tests automatis√©s** : `window.testDemoMode()` + `DemoModeTestSuite` avec validation compl√®te
- **Cas d'usage** : D√©monstrations client, formation √©quipe, tests fonctionnels sans risque
- **25 commandes + 20 factures + 10 utilisateurs** : Donn√©es coh√©rentes avec relations

### üì¨ **Syst√®me de Messagerie Avanc√© avec React Query**

- **useMessages.ts** : Hook principal 654 lignes avec 15+ hooks sp√©cialis√©s
- **useAdminMessages.ts** : Hook admin 321 lignes avec 12+ hooks mod√©ration
- **MessagesPage.tsx** : Interface client avec optimistic updates et cache intelligent
- **AdminMessagerie.tsx** : Interface admin avec filtres, recherche, actions masse
- **API compl√®te** : Messages avec threading, support requests, m√©tadonn√©es avanc√©es
- **Performance** : Pagination infinie, invalidation crois√©e, retry automatique
- **Hooks avanc√©s** : `useInfiniteQuery`, `useMutation`, cache 30s-5min, `useSendMessage`
- **Architecture** : 3 composants + 2 suites hooks React Query (1000+ lignes total)

### üìä **API Backend Robuste**

- **Routes d'authentification** : /auth/register, /auth/login, /auth/me
- **Routes admin utilisateurs** : **7 endpoints production** `/admin/users/*` avec CRUD complet et suppression RGPD
- **Routes admin commandes** : ‚úÖ Module complet (GET /admin/commandes avec filtres, GET /admin/commandes/:id d√©taill√©, PUT /admin/commandes/:id, DELETE /admin/commandes/:id)
- **Routes client commandes** : POST /commandes, GET /commandes
- **Routes de facturation** : GET /invoices, GET /invoices/:id, GET /invoices/:id/download
- **Routes de paiement Stripe** : POST /payments/create-checkout-session, GET /payments/status, POST /payments/webhook
- **Architecture backend** : AdminUserService avec m√©thodes statiques optimis√©es, AdminUserController avec validation stricte
- **S√©curit√© production** : JWT Admin obligatoire, validation Joi, hashage bcrypt 12 rounds, protection dernier admin
- **Middleware de r√¥les** avec RequireAdmin
- **Gestion d'erreurs** centralis√©e avec logs
- **Donn√©es de fallback** en cas d'indisponibilit√© DB

üìñ **Documentation API compl√®te** : [Guide Backend](docs/README-backend.md)

### üóÑÔ∏è **Base de Donn√©es Compl√®te (11 Mod√®les)**

- **User** : UUID, r√¥les, statut actif, avatar, contacts
- **Commande** : statuts, priorit√©s, √©ch√©ances, notes client/correcteur
- **Message** : messagerie unifi√©e (projet + support) avec threading
- **SupportRequest** : tickets de support avec SLA et assignation
- **File** : syst√®me de fichiers avec types, permissions, s√©curit√©
- **Invoice** : facturation automatique avec num√©rotation et PDF
- **PaymentMethod** : moyens de paiement Stripe avec chiffrement
- **Notification** : syst√®me de notifications avec types et priorit√©s
- **Page** : CMS pour contenu √©ditorial avec SEO
- **MessageAttachment** : pi√®ces jointes messages avec relations
- **Tarif** : ‚úÖ Mod√®le de tarification flexible (NEW)

**Relations RGPD** : Cascade DELETE, contraintes FK, soft delete  
**Performance** : Index optimis√©s, requ√™tes type-safe Prisma  
**Documentation** : [Guide complet Base de Donn√©es](docs/Base-de-donnees-guide.md)

---

## üèóÔ∏è Architecture Monorepo

### üìÅ **Structure du Projet Mise √† Jour**

```
Staka-livres/
‚îú‚îÄ‚îÄ backend/                 # API Node.js + Express + Prisma
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ server.ts       # Point d'entr√©e principal
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ controllers/    # Contr√¥leurs API
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ authController.ts      # Authentification
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ adminController.ts     # Administration
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ adminCommandeController.ts  # ‚úÖ Gestion commandes admin (NEW)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ commandeClientController.ts # Commandes client
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ paymentController.ts   # Paiements Stripe
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes/         # Routes Express
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.ts     # Routes authentification
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin.ts    # Routes administration
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ commandes.ts # ‚úÖ Routes admin commandes (NEW)
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ users.ts    # ‚úÖ Routes admin utilisateurs (NEW)
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ factures.ts # ‚úÖ Routes admin factures (NEW)
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ faq.ts      # ‚úÖ Routes admin FAQ (NEW)
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tarifs.ts   # ‚úÖ Routes admin tarifs (NEW)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ commandes.ts # Routes commandes client
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ invoice.ts  # Routes facturation
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ payments.ts # Routes paiements Stripe
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middleware/     # Middlewares Express
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.ts     # Middleware JWT
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ requireRole.ts # Middleware r√¥les
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/       # Services m√©tier
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ adminCommandeService.ts  # ‚úÖ Service admin commandes (NEW)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ stripeService.ts    # Service Stripe
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ invoiceService.ts   # Service factures
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils/          # Utilitaires
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ token.ts    # Gestion tokens JWT
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ mailer.ts   # Service email
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config/         # Configuration
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ types/          # Types TypeScript
‚îÇ   ‚îú‚îÄ‚îÄ prisma/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schema.prisma   # Sch√©ma base de donn√©es
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ migrations/     # Migrations appliqu√©es
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ seed.ts         # Donn√©es de test
‚îÇ   ‚îú‚îÄ‚îÄ tests/              # Tests backend avec Jest
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ unit/           # Tests unitaires
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ adminCommandeService.test.ts  # ‚úÖ Tests service (13 tests)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ integration/    # Tests d'int√©gration
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ adminCommandeEndpoints.test.ts # ‚úÖ Tests endpoints (15 tests)
‚îÇ   ‚îú‚îÄ‚îÄ package.json        # D√©pendances backend
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile          # Container backend
‚îÇ   ‚îú‚îÄ‚îÄ nodemon.json        # Config nodemon
‚îÇ   ‚îî‚îÄ‚îÄ tsconfig.json       # Config TypeScript
‚îú‚îÄ‚îÄ frontend/                # Application React + Vite + React Query
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app.tsx         # App React principale
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.tsx        # Point d'entr√©e avec QueryClientProvider
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/     # Composants React
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin/      # Composants administration (6 composants refactoris√©s)
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AdminLayout.tsx    # Layout admin moderne
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DemoModeProvider.tsx    # Mode d√©mo (453 lignes)
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RequireAdmin.tsx        # S√©curit√© multi-niveaux
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ StatCard.tsx       # Cartes statistiques
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CommandeStatusSelect.tsx # S√©lecteur statut
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserTable.tsx      # Table g√©n√©rique avec accessibilit√© WCAG (~400 lignes)
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SearchAndFilters.tsx   # Interface recherche et filtres (~300 lignes)
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ConfirmationModals.tsx # Modales RGPD avec cons√©quences d√©taill√©es
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ billing/    # Composants facturation React Query
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CurrentInvoiceCard.tsx     # Facture courante
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ InvoiceHistoryCard.tsx     # Historique factures
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ InvoiceDetailsModal.tsx    # D√©tails facture
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PaymentMethodsCard.tsx     # Moyens de paiement
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PaymentModal.tsx           # Modal paiement
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AnnualSummaryCard.tsx      # R√©sum√© annuel
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ SupportCard.tsx            # Support client
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ forms/      # Formulaires
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LoginForm.tsx      # Formulaire connexion
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ SignupForm.tsx     # Formulaire inscription
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout/     # Layout et navigation
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ landing/    # 14 composants production-ready (2400+ lignes)
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/usePricing.ts     # Hook tarification
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PricingCalculator.tsx   # Calculateur avanc√© (338 lignes)
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Navigation.tsx          # Navigation sticky (204 lignes)
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Hero.tsx                # Section hero (106 lignes)
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [10 autres composants]  # Services, Packs, FAQ, Contact...
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ modals/     # Modales
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ messages/   # Architecture messagerie compl√®te
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ConversationList.tsx   # Liste conversations
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MessageThread.tsx      # Thread de messages
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ MessageItem.tsx        # Affichage message
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ project/    # Gestion projets
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ common/     # Composants communs
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/          # Hooks React Query sp√©cialis√©s
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useInvoices.ts         # Hooks facturation (existant)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useMessages.ts         # Messagerie client (654 lignes)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useAdminMessages.ts    # Messagerie admin (321 lignes)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useAdminUsers.ts       # Gestion centralis√©e utilisateurs admin (~400 lignes)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useDebouncedSearch.ts  # Hook de recherche optimis√©e avec debounce
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ useIntersectionObserver.ts # Pagination infinie
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/          # Pages React
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin/      # Pages administration (9 pages compl√®tes)
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AdminDashboard.tsx    # Tableau de bord avec KPIs
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AdminUtilisateurs.tsx # Gestion CRUD utilisateurs
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AdminCommandes.tsx    # Gestion commandes avec statuts
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AdminFactures.tsx     # Interface facturation avanc√©e
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AdminFAQ.tsx          # Gestion FAQ et base connaissance
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AdminTarifs.tsx       # Configuration prix et services
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AdminPages.tsx        # CMS pages statiques avec SEO
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AdminStatistiques.tsx # Analytics et m√©triques avanc√©es
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AdminLogs.tsx         # Timeline audit et logs syst√®me
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ BillingPage.tsx       # Page facturation React Query
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LoginPage.tsx         # Page connexion
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ SignupPage.tsx        # Page inscription
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ contexts/       # Contextes React
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AuthContext.tsx       # Contexte authentification
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils/          # Utilitaires frontend
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.ts     # Utils authentification
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ adminAPI.ts # API administration
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api.ts      # Services API factures
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ toast.ts    # Notifications toast
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ types/          # Types TypeScript
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ shared.ts      # Types partag√©s locaux avec CommandeDetailed
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ messages.ts    # Types messagerie
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ styles/         # Styles CSS globaux
‚îÇ   ‚îú‚îÄ‚îÄ package.json        # D√©pendances frontend + react-query@3.39.3
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile          # Container frontend
‚îÇ   ‚îú‚îÄ‚îÄ vite.config.ts      # Config Vite avec optimizeDeps
‚îÇ   ‚îî‚îÄ‚îÄ tailwind.config.js  # Config Tailwind
‚îú‚îÄ‚îÄ shared/                  # Types et utils partag√©s
‚îÇ   ‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts        # Types communs compil√©s
‚îÇ   ‚îú‚îÄ‚îÄ dist/               # Types compil√©s ES Module
‚îÇ   ‚îú‚îÄ‚îÄ tsconfig.json       # Config compilation partag√©e
‚îÇ   ‚îî‚îÄ‚îÄ package.json        # D√©pendances partag√©es
‚îú‚îÄ‚îÄ docker-compose.yml       # Orchestration Docker avec volumes
‚îú‚îÄ‚îÄ .dockerignore           # Exclusions Docker
‚îú‚îÄ‚îÄ package.json            # Config workspace racine
‚îî‚îÄ‚îÄ README.md               # Cette documentation
```

---

## üõ†Ô∏è Technologies Utilis√©es

### üöÄ **Backend (Node.js)**

- **Node.js 18** : Runtime JavaScript moderne
- **Express.js** : Framework web minimaliste
- **TypeScript** : Typage statique pour la robustesse
- **Prisma ORM** : Mod√©lisation et requ√™tes type-safe
- **MySQL 8** : Base de donn√©es relationnelle
- **JWT (jsonwebtoken)** : Authentification s√©curis√©e
- **bcryptjs** : Hachage des mots de passe (12 rounds)
- **cors** : Gestion des requ√™tes cross-origin
- **helmet** : S√©curit√© HTTP
- **winston** : Logging avanc√©
- **nodemon** : Rechargement automatique en dev
- **ts-node** : Ex√©cution TypeScript directe
- **Stripe** : Plateforme de paiement s√©curis√©e
- **Jest** : Framework de tests unitaires et d'int√©gration

### üé® **Frontend (React + React Query)**

- **React 18** : Framework JavaScript moderne avec hooks
- **TypeScript** : Typage statique pour la robustesse
- **Vite** : Build tool ultra-rapide avec HMR et optimizeDeps
- **React Query v3** : Cache intelligent et gestion d'√©tat serveur
- **Tailwind CSS** : Framework CSS utility-first
- **React Context API** : Gestion d'√©tat authentification
- **Animations CSS** : Transitions fluides et micro-interactions

### üóÑÔ∏è **Base de Donn√©es**

- **MySQL 8** : Base de donn√©es principale
- **Prisma Client** : ORM type-safe
- **Prisma Migrate** : Gestion des migrations
- **Seed Data** : Comptes de test pr√©charg√©s

### üê≥ **DevOps et D√©ploiement**

- **Docker** : Conteneurisation des services
- **Docker Compose** : Orchestration multi-services avec volumes
- **npm workspaces** : Gestion monorepo
- **Nginx** : Serveur web (frontend en prod)
- **ngrok** : Tunnel s√©curis√© pour webhooks Stripe en d√©veloppement

---

## üìã **Changelog R√©cent**

### ‚úÖ **Version Actuelle (Janvier 2025)**

**üéØ Module AdminCommandes Complet D√©velopp√© :**

- ‚úÖ **AdminCommandeService** : Service complet avec m√©thodes `getCommandes()` et `getCommandeById()` incluant filtres avanc√©s, calcul de statistiques par statut, et r√©cup√©ration d√©taill√©e avec toutes les relations
- ‚úÖ **AdminCommandeController** : Contr√¥leur avec gestion d'erreurs compl√®te, validation des entr√©es et logs de debugging
- ‚úÖ **Routes AdminCommandes** : 4 endpoints REST prot√©g√©s (`GET /admin/commandes`, `GET /admin/commandes/:id`, `PUT /admin/commandes/:id`, `DELETE /admin/commandes/:id`)
- ‚úÖ **Tests complets** : 13 tests unitaires + 15 tests d'int√©gration valid√©s avec authentification JWT et autorisation ADMIN
- ‚úÖ **Logs de debugging** : Syst√®me complet de logs pour tra√ßabilit√© des requ√™tes et filtres appliqu√©s
- ‚úÖ **Modale de d√©tails moderne** : Interface XL avec design √©l√©gant, toutes les donn√©es disponibles et actions rapides

**üóÑÔ∏è Base de Donn√©es Compl√®te Op√©rationnelle :**

- ‚úÖ **11 mod√®les de donn√©es complets** : User, Commande, File, Message, SupportRequest, PaymentMethod, Invoice, Notification, Page, MessageAttachment, Tarif
- ‚úÖ **Sch√©ma Prisma robuste** : Relations RGPD, contraintes FK, index performance
- ‚úÖ **Migrations corrig√©es** : D√©ploiement automatique sans erreurs
- ‚úÖ **Support Request Integration** : Messagerie unifi√©e projet + support
- ‚úÖ **Documentation compl√®te** : Guide d√©taill√© dans `docs/Base-de-donnees-guide.md`

**üéØ Espace Admin Complet Finalis√© :**

- ‚úÖ **9 pages admin compl√®tes** : Dashboard, Utilisateurs, Commandes, Factures, FAQ, Tarifs, Pages, Statistiques, Logs
- ‚úÖ **AdminLayout moderne** : Sidebar sombre avec navigation fluide et animations
- ‚úÖ **Mock data r√©alistes** : Donn√©es compl√®tes pour tous les modules admin
- ‚úÖ **Composants r√©utilisables** : LoadingSpinner, Modal, ConfirmationModal
- ‚úÖ **Interface production-ready** : Design moderne avec UX soign√©e
- ‚úÖ **Architecture API-ready** : Structure pr√™te pour int√©gration backend

**üéØ Int√©gration React Query Compl√®te :**

- ‚úÖ React Query v3.39.3 install√© et configur√© avec QueryClientProvider
- ‚úÖ Hooks `useInvoices()`, `useInvoice()`, `useInvalidateInvoices()` fonctionnels
- ‚úÖ Cache intelligent 5-10 minutes avec invalidation automatique
- ‚úÖ √âtats optimis√©s : `isLoading`, `isFetching`, `error` g√©r√©s automatiquement
- ‚úÖ Pagination fluide avec `keepPreviousData`
- ‚úÖ T√©l√©chargement PDF via blob API avec trigger automatique
- ‚úÖ BillingPage refactoris√©e : suppression des fetch manuels

**üîß R√©solution Probl√®mes Frontend :**

- ‚úÖ Configuration `optimizeDeps` dans vite.config.ts
- ‚úÖ Force re-optimization des d√©pendances React Query
- ‚úÖ Nettoyage cache Vite automatique
- ‚úÖ Build TypeScript fonctionnel sans erreurs
- ‚úÖ **Correction Tailwind CDN** : Suppression du CDN en faveur de PostCSS avec configuration personnalis√©e
- ‚úÖ **R√©solution "exports is not defined"** : Configuration modules ES6 pour types partag√©s
- ‚úÖ **Types partag√©s optimis√©s** : Utilisation directe des fichiers TypeScript source

**üöÄ Performance et UX Optimis√©es :**

- ‚úÖ Navigation instantan√©e gr√¢ce au cache React Query
- ‚úÖ Background refresh silencieux des donn√©es
- ‚úÖ Retry automatique et d√©duplication des requ√™tes
- ‚úÖ Toasts d'erreurs intelligents et EmptyState
- ‚úÖ Disabled states pour boutons pendant chargement

**üèóÔ∏è Refactorisation AdminUtilisateurs Compl√®te (2025) :**

- ‚úÖ **Architecture modulaire** : 5 nouveaux composants/hooks r√©utilisables cr√©√©s
- ‚úÖ **useAdminUsers.ts** : Hook centralis√© pour logique API et gestion d'√©tats (~400 lignes)
- ‚úÖ **useDebouncedSearch.ts** : Hook de recherche optimis√©e avec debounce configurable
- ‚úÖ **UserTable.tsx** : Composant table g√©n√©rique avec accessibilit√© WCAG 2.1 compl√®te
- ‚úÖ **SearchAndFilters.tsx** : Interface de recherche et filtres avec UX optimis√©e
- ‚úÖ **ConfirmationModals.tsx** : Modales RGPD avec cons√©quences d√©taill√©es
- ‚úÖ **Performance optimis√©e** : R√©duction 80% appels API, mises √† jour optimistes, cache intelligent
- ‚úÖ **Accessibilit√© native** : Navigation clavier, r√¥les ARIA, screen readers, focus management
- ‚úÖ **TypeScript strict** : Interfaces compl√®tes et typage robuste pour maintenance
- ‚úÖ **Composants g√©n√©riques** : R√©utilisables pour autres entit√©s (commandes, factures, messages)

**üê≥ Infrastructure Docker Stabilis√©e :**

- ‚úÖ Configuration MySQL 8.4+ corrig√©e (`--mysql-native-password=ON`)
- ‚úÖ Base de donn√©es persistante avec migrations automatiques
- ‚úÖ Prisma Studio accessible sur port 5555
- ‚úÖ Variables d'environnement s√©curis√©es

**üîß Corrections Techniques Majeures :**

- ‚úÖ **Champ Invoice.number** : Correction erreur TypeScript sur facturation
- ‚úÖ **Colonne supportRequestId** : Ajout√©e avec index et contraintes FK
- ‚úÖ **Export server.ts** : Ajout export default pour compatibilit√© tests
- ‚úÖ **Migrations nettoy√©es** : Suppression dossiers vides causant √©checs
- ‚úÖ **Troubleshooting complet** : Guide r√©solution 8 probl√®mes courants

**üöÄ Int√©gration Stripe Compl√®te :**

- ‚úÖ API de paiement fonctionnelle avec sessions Stripe
- ‚úÖ Prix dynamique (468‚Ç¨) sans d√©pendance aux produits pr√©-cr√©√©s
- ‚úÖ Webhooks configur√©s pour mise √† jour automatique des statuts
- ‚úÖ Gestion des erreurs et logging complet

**üìä Donn√©es de Test Op√©rationnelles :**

- ‚úÖ Seed automatique avec comptes admin/user
- ‚úÖ 3 commandes de test avec diff√©rents statuts de paiement
- ‚úÖ Structure compl√®te User ‚Üî Commande ‚Üî Invoice avec champs Stripe
- ‚úÖ **Prisma Studio** : Interface d'administration sur http://localhost:5555

---

## üöÄ **D√©marrage Rapide**

### ‚ö° **Installation et Configuration**

**Pr√©requis :**

- Docker et Docker Compose install√©s
- Node.js 18+ (pour d√©veloppement local)
- Git

**1. Cloner le projet :**

```bash
git clone <repository-url>
cd Staka-livres
```

**2. Configuration de l'environnement :**

```bash
# Cr√©er le fichier de configuration backend
touch backend/.env
```

**3. Configurer les variables d'environnement dans `backend/.env` :**

```env
# Base de donn√©es
DATABASE_URL="mysql://staka:staka@db:3306/stakalivres"

# Authentification JWT
JWT_SECRET="dev_secret_key_change_in_production"
NODE_ENV="development"

# Frontend URL
FRONTEND_URL="http://localhost:3000"
PORT=3001

# Configuration Stripe (remplacer par vos vraies cl√©s)
STRIPE_SECRET_KEY="sk_test_VOTRE_CLE_SECRETE_STRIPE"
STRIPE_WEBHOOK_SECRET="whsec_VOTRE_WEBHOOK_SECRET"

# Linting ESLint
npm run lint --workspace=frontend

**Consulter la documentation sp√©cialis√©e selon vos besoins de d√©veloppement ou d'administration.**
```
